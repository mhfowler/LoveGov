<!-- CSS -->
<link rel="stylesheet" type="text/css" href="/static/css/compiled/account.css" xmlns="http://www.w3.org/1999/html"/>

<div class="main-div">
    <div class="account-left">
        <h2>Account Settings</h2>
        <div class="account-button-options">
            <div class="account-button">
                <div class="account-button-pointer">
                    <div class="border"></div>
                    <div class="inner"></div>
                </div>
                <span>Basic Information</span>
            </div>
            <div class="account-button-separator"></div>
            <div class="account-button">
                <span>Change Password</span>
            </div>
            <div class="account-button-separator"></div>
            <div class="account-button">
                <span>Profile</span>
            </div>
        </div>
    </div>
    <div class="account-right">
        <div id="account-basic-information">
            <form action="" method="post"> {% csrf_token %}
                <table>
                    <tr>
                        <td></td>
                        <td><h2>Basic Information</h2></td>
                    </tr>
                    <tr>
                        <td class="left"><h3>first name</h3></td>
                        <td><input type="text" value="{{ viewer.get_first_name }}" name="first_name"/></td>
                    </tr>
                    <tr class="break"></tr>
                    <tr>
                        <td class="left"><h3>last name</h3></td>
                        <td><input type="text" value="{{ viewer.get_last_name }}" name="last_name"/></td>
                    </tr>
                    <tr class="break"></tr>
                    <tr>
                        <td class="left"><h3>email</h3></td>
                        <td><input type="text" value="{{ viewer.get_email }}" name="email"/></td>
                    </tr>
                    <tr class="break-small"></tr>
                    <tr>
                        <td class="left">
                            <h3>address</h3>
                            <p>
                                We use your address to determine your voting district. See our <a>privacy policy</a> for details.
                            </p>
                        </td>
                        <td><textarea id="address_input" name="address">{{ viewer.get_address }}</textarea></td>
                    </tr>
                    <tr class="break-large"></tr>
                    <tr>
                        <td></td>
                        <td style="text-align:right"><input type="submit" class="button-red" value="save changes"/></td>
                    </tr>
                </table>
            </form>
        </div>
    </div>

</div>

<script type="text/javascript">

    function account()
    {
        var pointer = $('.account-button-pointer').detach();

        $('.account-button').click(function()
        {
            $('.account-button').removeClass("account-button-selected");
            $(this).addClass("account-button-selected");
            $(this).prepend(pointer);

        });

        $('#address_input').keypress(function(event)
        {
            if ($(this).val().length >= 100)
            {
                event.preventDefault();
            }
        });
    }

    account();


</script>


<!-- HTML -->
<div id="account-main" style="width:1000px;margin-left:auto;margin-right:auto;margin-top:65px">
    <!-- Password Form -->
    <div id="left" class="box">
        <h3> Change Your Password </h3>
        <form action="" method="post" id="passwordform"> {% csrf_token %}

            <table>
                <tr height="5px"></tr>
                <tr>
                    <td>old:</td>
                    <td></td>
                    <td><input type="password" class="inputs" name="old"/></td>
                <tr height="4px"></tr>
                <tr>
                    <td>new:</td>
                    <td></td>
                    <td><input id="new1" type="password" class="inputs new" name="new1"/></td>
                </tr>
                <tr>
                    <td>new:</td>
                    <td></td>
                    <td><input id="new2" type="password" class="inputs new" name="new2"/></td>
                </tr>
            </table>

            <p><a class="button submit" id="submitpassword" href=""> submit </a></p>

            <input type="hidden" name="box" value="password"/>

        </form>

        <div id="pass-message">
            {{ pass_message }}
        </div>

    </div>

    <!-- Profile Image Form -->
    <div id="right" class="box">
        <h3> Change Your Profile Image </h3>

        <div id="profile-img">
            {% load thumbnail %}
            {% thumbnail userProfile.getProfileImage.image "130x130" crop="center" as im %}
                <img src="{{ im.url }}"/>
            {% empty %}
                <p> no pic </p>
            {% endthumbnail %}
        </div>

        <div id="pic-message">
            {{ pic_message }}
        </div>

        <form id="picform" action="" method="post" enctype="multipart/form-data"> {% csrf_token %}
            <input type="submit" class="button submit" id="submitpicture" value="Upload"/>
            <div id="choose-image">{{ uploadform.image }}</div>

            <input type="hidden" name="box" value="pic"/>
        </form>

    </div>
</div>

<!-- Javascript -->
<script> rebind='account'; </script>
<!-- End Account -->


