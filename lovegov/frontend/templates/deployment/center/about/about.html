<div class="main-div data_start" data-start="{{ start_page }}">

    <div class="nav-top-div">
        <div class="top-nav-left">
            <div id="howitworks-button" class="div-button"><span>How it works</span></div>
            <div id="whoarewe-button" class="div-button"><span>Who are we</span></div>
            <div id="contact-button" class="div-button"><span>Contact</span></div>
            <div id="privacy-button" class="div-button"><span>Privacy</span></div>
        </div>
        <div class="top-nav-right">
            <div>
                <h1>What is LoveGov?</h1>
                <img src=/static/images/login/banner-425x287.png>
            </div>
            <p>
                LoveGov will inform you on issues, keep you current with legislation that you care about and connect
                you with your representatives. We're making it easy to get involved.
            </p>

        </div>
    </div>

    <div class="nav-top-div-border"></div>

    <div id="about-content">

        <div id="privacy-div" class="_fade">
            {% include 'deployment/pages/privacy.html' %}
        </div>

        <div id="whoarewe-div" class="_fade">
            {% include 'deployment/center/about/who-are-we.html' %}
        </div>

        <div id="howitworks-div" class="_fade">
            {% include 'deployment/center/about/how-it-works.html' %}
        </div>

        <div id="contact-div" class="_fade">
            {% include 'deployment/center/about/contact.html' %}
        </div>

        <div id="video-div" class="_fade">
            {% include 'deployment/center/about/video.html' %}
        </div>

    </div>

</div>

<script type="text/javascript">

    (function( $ )
    {
        $.fn.textFadeIn = function(options)
        {
            var settings = $.extend({
                'speed'         : 25
            }, options);

            var self = this;
            var full_text = self.data('full_text');
            var timeouts = self.data("timeouts");

            if (!full_text) { self.data('full_text', self.text()); }

            if (timeouts)
            {
                for (var j=0;j<self.data('timeouts').length;j++)
                {
                    clearTimeout(self.data('timeouts')[j]);
                }
            }
            else { self.data('timeouts',new Array()); }

            var textSplit = self.data('full_text').split('');
            var counter = 0;
            this.empty();

            function countdown()
            {
                if(counter < textSplit.length)
                {
                    self.append('<span style="display:none" id="fadespan' + counter + '">' + textSplit[counter] + '</span');
                    $('#fadespan' + counter).fadeIn('slow').replaceWith(function(){return this.innerHTML;});
                    self.text(self.text());
                    counter++;
                    var t = setTimeout(countdown, settings.speed);
                    self.data('timeouts').push(t);
                }
            }
            countdown();
        };
    })( jQuery );

    function aboutPage()
    {
        var center_x = {{ x|add:side_half }};
        var center_y = {{ y|add:side_half }};

        var developerDivs = $('.who-are-we-circle-div');
        var h3 = $('.who-are-we-circle-div-center h3');

        var text = $('.mission p').text();

        developerDivs.each(function()
        {
            $(this).hover
                    (
                            function()
                            {
                                var json = $(this).data('json');
                                $(this).addClass($(this).attr("class") + '-hover');
                                $('.who-are-we-circle-div-center').css('background-color','white');
                                $('.who-are-we-circle-div-center div').show();
                                $('.who-are-we-circle-div-center div').children('h5').text(json['first_name'] + " " + json['last_name']);
                                $('.who-are-we-circle-div-center div').children('h6').text(json['user_title']);
                                h3.hide();
                            },
                            function()
                            {
                                $(this).removeClass($(this).attr("class").split(' ')[1] + '-hover');
                                $('.who-are-we-circle-div-center').css('background-color','');
                                $('.who-are-we-circle-div-center div').hide();
                                h3.show();
                            });

        });

        $('.div-button').click(function()
        {

            $(".div-button").removeClass("clicked");
            $(this).addClass("clicked");

            $('._fade').hide();
            var div = '#' + $(this).attr('id').replace('button','div');
            var url = $(this).attr('id').replace('-button', '');
            History.pushState( {k:1}, url, '/about/' + url + '/');

            $(div).show();
            if (div=='#who-are-we-div')
            {

                developerDivs.each(function()
                {
                    var json = $(this).data('json');
                    $(this).animate({'left':json.x,'top':json.y});
                });

                //$('.mission p').textFadeIn({'speed':10});
                $('.mission p').show();

            }
            else
            {
                developerDivs.each(function()
                {
                    $(this).css({'left':center_x,'top':center_y});
                });
            }
        });
    }

    $(document).ready(function()
    {
        aboutPage();

        var start = $(".data_start").data('start');

        if (start=='video') {
            $("#video-div").show();
        }
        else {
            var buttonid =  start + "-button";
            var divid = start + "-div";

            $("#" + buttonid).addClass("clicked");
            $("#" + divid).show();
        }
    });

</script>