{% load thumbnail %}
<div class="notification">
{% if not viewed %}
<b>
{% endif %}
    <!-- Commented -->
    {% if type == 'CO' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        commented on
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    <!-- Voted -->
    {% elif type == 'VO' %}
        {% thumbnail "/static/images/feed/heart-small.png" "17x17" crop="center" as im %}
            <img src="{{ im.url }}" class="icon-really-big"/>
        {% endthumbnail %}
        {% if modifier == 'L' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            {% if tally == 2 %}
                and one other person
            {% elif tally > 2 %}
                and {{ tally|add:"-1" }} other people
            {% endif %}
            liked
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% elif modifier == 'D' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            {% if tally == 2 %}
                and one other person
            {% elif tally > 2 %}
                and {{ tally|add:"-1" }} other people
            {% endif %}
            disliked
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% else %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            {% if tally == 2 %}
                and one other person
            {% elif tally > 2 %}
                and {{ tally|add:"-1" }} other people
            {% endif %}
            unvoted
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% endif %}

    <!-- Followed -->
    {% elif type == 'FO' %}
        {% if modifier == 'R' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            requested to follow
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
            {% if not follow.rejected and not follow.confirmed and follow.requested %}
                <div class="notification-follow-response">
                    <a href="" class="notification-follow-response-y"> I accept! </a> ||
                    <a href="" class="notification-follow-response-n"> I decline! </a>
                    <input type="hidden" class="user-follow-id" value="{{ from_user.id }}"/>
                </div>
            {% endif %}
        {% elif modifier == 'D' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            followed
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
            {% if not reverse_follow.confirmed and not reverse_follow.requested %}
                <div class="notification-follow">
                    <a href="" class="notification-user-follow">
                        follow them back!
                    </a>
                    <input type="hidden" class="user-follow-id" value="{{ from_user.id }}"/>
                </div>
            {% endif %}
        {% elif modifier == 'A' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you capital=true%}
            accepted
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you possesive=true %}
            follow request
        {% elif modifier == 'X' %}
            {% if from_you %}
                {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
                were rejected from following
                {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
            {% else %}
                {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
                was rejected from following
                {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
            {% endif %}
        {% elif modifier == 'S' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            stopped following
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% endif %}

    <!-- Group Follow -->
    {% elif type == 'JO' %}
        {% if modifier == 'I' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            {% if from_you %}
                were invited to join
            {% else %}
                was invited to join
            {% endif %}
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% elif modifier == 'R' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            requested to join
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
            {% if not group_join.rejected and not group_join.confirmed and group_join.requested %}
                <div class="notification-follow-response">
                    <a href="" class="notification-follow-response-y"> I accept! </a> ||
                    <a href="" class="notification-follow-response-n"> I decline! </a>
                    <input type="hidden" class="user-follow-id" value="{{ from_user.id }}"/>
                </div>
            {% endif %}
        {% elif modifier == 'A' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you capital=true %}
            accepted
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you possesive=true %}
            join request
        {% elif modifier == 'D' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            joined
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% elif modifier == 'N' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            declined to join
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% elif modifier == 'X' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            {% if from_you %}
                were rejected from
            {% else %}
                was rejected from
            {% endif %}
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% elif modifier == 'S' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            left
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% endif %}

    <!-- Events -->
    {% elif type == 'AE' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true%}
        {% if modifier == 'I' %}
            {% if from_you %}
                 were invited to attend
            {% else %}
                was invited to attend
            {% endif %}
        {% elif modifier == 'R' %}
            requested to attend
        {% elif modifier == 'D' %}
            {% if from_you %}
                are attending
            {% else %}
                is attending
            {% endif %}
        {% elif modifier == 'N' %}
            refused to attend
        {% elif modifier == 'X' %}
            {% if from_you %}
                were rejected from attending
            {% else %}
                was rejected from attending
            {% endif %}
        {% endif %}
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

<!-- Debate Section -->
    {% elif type == 'JD' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true%}
        {% if modifier == 'I' %}
            was invited to debate
        {% elif modifier == 'R' %}
            requested to debate
        {% elif modifier == 'D' %}
            is debating
        {% elif modifier == 'N' %}
            declined to debate
        {% elif modifier == 'X' %}
            was rejected from debating
        {% endif %}
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'FC' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true%}
        followed
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'MV' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        voted on
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'DV' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        voted on
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'DM' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        responded in
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'SI' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        {% if tally == 2 %}
            and one other person
        {% elif tally > 2 %}
            and {{ tally|add:"-1" }} other people
        {% endif %}
        signed
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'SH' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        shared
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'CR' %}
        {% if to_user.type == 'R' %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            answered
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% else %}
            {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
            created
            {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}
        {% endif %}

    {% elif type == 'ED' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        edited
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% elif type == 'XX' %}
        {% include "deployment/snippets/action_name_snippet.html" with user=from_user you=from_you capital=true %}
        deleted
        {% include "deployment/snippets/action_name_snippet.html" with user=to_user you=to_you %}

    {% endif %}
{% if not viewed %}
</b>
{% endif %}
</div>